---
title: "1d_merging_arrest_and_population_data"
author: "Brit Henderson"
date: "Last Updated: `r format(Sys.time(), '%d %B, %Y')`"
output: html_document
---
# Objective
Combine arrest counts data with population counts data
```{r directories}
readdatdir <- "/data/share/xproject/Training/Practice/henderson/Dissertation/rda"
rdadir <- "/data/share/xproject/Training/Practice/henderson/Dissertation/rda"

```

```{r functions}

```

```{r packages}
# # Import packages
library(Hmisc)
library(tidyverse) # suite of packages in for manipulating/tidying/visualizing, etc. data
library(lubridate) # manipulating dates
library(readxl)  # read in excel files
library(knitr) # for RMD formatting
library(kableExtra) # to output tables as images
library(fastDummies) # easy creation of dummy variables 



```


#Load the data sets
```{r data}
arrests <- readRDS(here::here("rda/total_arrests_by_county.rds"))
population <- readRDS(here::here("rda/population_wide.rds"))


```

# merge data sets
```{r merge}
#renaming columns to match
arrests <- rename(arrests, fips_clean = fips_state_county_code)
#put all data frames into list
df_list <- list(arrests, population)      

#merge all data frames together
combo1 <- df_list %>% reduce(full_join, by= c("year","fips_clean"))



```



#summary statistics for all arrests data set
```{r stats}
summary(all.arrests)
describe(all.arrests)
glimpse(all.arrests2)
```

```{r checks}

checkdat <- all.arrests2 %>% 
  group_by(year, agency_name, fips_place_code, fips_state_county_code) %>% 
  summarise(n = n())

summary(checkdat2)

hist(checkdat2$n)
table(checkdat2$n, useNA = "always")
checkdat2 <- all.arrests2 %>% count(year, agency_name, fips_place_code, fips_state_county_code)
```




#Save files to type rda

```{r}
saveRDS(all.arrests2, file = file.path(rdadir, "all_arrests.rds"))
```

